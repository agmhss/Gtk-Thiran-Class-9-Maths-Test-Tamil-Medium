<!DOCTYPE html>
<html lang="ta">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>9роорпН ро╡роХрпБрокрпНрокрпБ тАФ роХрогро┐род ро╡ро┐ройро╛ ро╡роЩрпНроХро┐ (10 роородро┐рокрпНрокрпЖрогрпН)</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
  body{font-family:"Noto Sans Tamil",sans-serif;background:#f9fafb;padding:20px;color:#222;text-align:center;}
  h1{color:#006699;margin-bottom:10px;}
  .info-box input{padding:8px;margin:5px;border-radius:6px;border:1px solid #aaa;width:80%;max-width:400px;}
  .card{background:#fff;border-radius:15px;box-shadow:0 2px 8px rgba(0,0,0,0.1);padding:20px;margin:auto;max-width:700px;text-align:left;}
  button{background:#0084ff;border:none;color:#fff;padding:10px 20px;margin:10px;border-radius:8px;cursor:pointer;font-size:16px;}
  button:hover{background:#006edc;}
  .option-btn{display:block;width:100%;margin:8px 0;background:#e0f2ff;color:#111;text-align:left;padding:10px;border-radius:6px;border:1px solid #bde0ff;}
  #scoreboard,#timer{font-size:18px;margin-bottom:8px;color:#333;}
  .footer{margin-top:15px;color:#555;font-size:14px;}
  .small{color:#555;font-size:13px;}
</style>
</head>

<body>
<h1>ЁЯУШ 9роорпН ро╡роХрпБрокрпНрокрпБ роХрогро┐род родрпЗро░рпНро╡рпБ (10 роородро┐рокрпНрокрпЖрогрпН)</h1>

<div class="info-box" id="infoBox">
  <h3>рооро╛рогро╡ро░рпН ро╡ро┐ро╡ро░роЩрпНроХро│рпН</h3>
  <input type="text" id="studentName" placeholder="рокрпЖропро░рпН"><br>
  <input type="text" id="studentClass" placeholder="ро╡роХрпБрокрпНрокрпБ рооро▒рпНро▒рпБроорпН рокро┐ро░ро┐ро╡рпБ (роО.роХро╛., 9A)"><br>
  <input type="text" id="studentSchool" placeholder="рокро│рпНро│ро┐ рокрпЖропро░рпН"><br><br>
  <button id="startBtn" onclick="startQuiz()">родрпКроЯроЩрпНроХрпБ тЮбя╕П</button>
</div>

<div id="quizArea" style="display:none;">
  <div id="scoreboard">роородро┐рокрпНрокрпЖрогрпН: 0 / 10</div>
  <div id="timer">тП▒я╕П роирпЗро░роорпН: 60</div>
  <div id="quiz" class="card"></div>

  <div style="margin-top:8px;">
    <button id="nextBtn" onclick="nextQuestion()">роЕроЯрпБродрпНрод ро╡ро┐ройро╛ тЮбя╕П</button>
    <button id="downloadBtn" style="display:none;" onclick="downloadPDF()">ЁЯУД PDF рокродро┐ро╡ро┐ро▒роХрпНроХ</button>
  </div>
</div>

<script>
const bank = [
  { sentence:`50000 + 300 + 70 + 5 роЗройрпН роЪрпБро░рпБроЩрпНроХро┐роп ро╡роЯро┐ро╡роорпН.`, chapter:`роОрогрпНроХро│рпН рооро▒рпНро▒рпБроорпН роЗроЯроородро┐рокрпНрокрпБ`, options:[`53750`,`50375`,`53075`,`57305`], answerText:`50375`, explanation:`50000 + 300 + 70 + 5 = 50375.` },
  { sentence:`826 роЗройрпН ро╡ро┐ро░ро┐ро╡ро╛роХрпНроХ ро╡роЯро┐ро╡роорпН?`, chapter:`роОрогрпНроХро│рпН рооро▒рпНро▒рпБроорпН роЗроЯроородро┐рокрпНрокрпБ`, options:[`800 + 20 + 6`,`820 + 6`,`80 + 26`,`8 + 26`], answerText:`800 + 20 + 6`, explanation:`826 = 800 + 20 + 6.` },
  { sentence:`1000 ml = ? liter`, chapter:`роЕро│ро╡рпБроХро│рпН`, options:[`1 L`,`100 L`,`0.1 L`,`10 L`], answerText:`1 L`, explanation:`1000 ml = 1 L.` }
];

let student={},questions=[],currentIndex=0,current=null,score=0,timer=null,timeLeft=60,answers=[];
const TIME_PER_QUESTION=60;

/* ---- Start Quiz ---- */
function startQuiz(){
  student.name=document.getElementById("studentName").value.trim();
  student.class=document.getElementById("studentClass").value.trim();
  student.school=document.getElementById("studentSchool").value.trim();
  student.date=new Date().toLocaleDateString('ta-IN');

  if(!student.name||!student.class||!student.school){
    alert("тЭЧ роЕройрпИродрпНродрпИропрпБроорпН роиро┐ро░рокрпНрокро╡рпБроорпН (рокрпЖропро░рпН, ро╡роХрпБрокрпНрокрпБ, рокро│рпНро│ро┐).");
    return;
  }
  questions=bank.slice().sort(()=>0.5-Math.random()).slice(0,10);
  document.getElementById("infoBox").style.display="none";
  document.getElementById("quizArea").style.display="block";
  score=0;currentIndex=0;answers=[];
  nextQuestion();
}

/* ---- Next Question ---- */
function nextQuestion(){
  clearInterval(timer);
  if(currentIndex>=questions.length){finishQuiz();return;}
  current=questions[currentIndex];
  timeLeft=TIME_PER_QUESTION;
  document.getElementById("scoreboard").textContent=`роородро┐рокрпНрокрпЖрогрпН: ${score} / 10`;
  document.getElementById("timer").textContent=`тП▒я╕П роирпЗро░роорпН: ${timeLeft}`;
  const quiz=document.getElementById("quiz");
  quiz.innerHTML=`
    <h3>${currentIndex+1}. ${current.sentence}</h3>
    <p class="small"><b>роЕро▓роХрпБ:</b> ${current.chapter}</p>
    ${current.options.map((o)=>`<button class="option-btn" data-opt="${o}" onclick="checkAnswer(this.dataset.opt)">${o}</button>`).join('')}
    <p class="small">роХро╛ро▓ ро╡ро░роорпНрокрпБ: ${TIME_PER_QUESTION} ро╡ро┐ройро╛роЯро┐роХро│рпН</p>`;
  timer=setInterval(()=>{
    timeLeft--;
    document.getElementById("timer").textContent=`тП▒я╕П роирпЗро░роорпН: ${timeLeft}`;
    if(timeLeft<=0){
      clearInterval(timer);
      recordAnswer("роирпЗро░роорпН роорпБроЯро┐роирпНродродрпБ",false);
      alert("тП░ роирпЗро░роорпН роорпБроЯро┐роирпНродродрпБ!\nроЪро░ро┐ропро╛рой рокродро┐ро▓рпН: "+current.answerText);
      currentIndex++;nextQuestion();
    }
  },1000);
}

/* ---- Check Answer ---- */
function checkAnswer(option){
  clearInterval(timer);
  const correct=option===current.answerText;
  if(correct)score++;
  recordAnswer(option,correct);
  alert((correct?"тЬЕ роЪро░ро┐ропро╛рой рокродро┐ро▓рпН!":"тЭМ родро╡ро▒рпБ!")+"\nро╡ро┐ро│роХрпНроХроорпН: "+current.explanation);
  currentIndex++;nextQuestion();
}

/* ---- Record ---- */
function recordAnswer(sel,correct){
  answers.push({question:current.sentence,yourAnswer:sel,correctAnswer:current.answerText,isCorrect:correct});
}

/* ---- Finish ---- */
function finishQuiz(){
  clearInterval(timer);
  const pct=Math.round((score/10)*100);
  const grade=gradeFromPercent(pct);
  document.getElementById("quiz").innerHTML=`
    <h2>ЁЯОЙ рокро░рпАроЯрпНроЪрпИ роорпБроЯро┐роирпНродродрпБ!</h2>
    <p>роородро┐рокрпНрокрпЖрогрпН: ${score} / 10</p>
    <p>роЪродро╡рпАродроорпН: ${pct}%</p>
    <p>роородро┐рокрпНрокрпАроЯрпБ: ${grade}</p>`;
  document.getElementById("nextBtn").style.display="none";
  document.getElementById("downloadBtn").style.display="inline-block";
}

function gradeFromPercent(p){
  if(p>=90)return"A+";
  if(p>=80)return"A";
  if(p>=70)return"B";
  if(p>=60)return"C";
  if(p>=50)return"D";
  return"F";
}

/* ---- PDF ---- */
async function downloadPDF(){
  const {jsPDF}=window.jspdf;
  const doc=new jsPDF();
  doc.setFontSize(13);
  let y=15;
  doc.text("9роорпН ро╡роХрпБрокрпНрокрпБ тАФ роХрогро┐род (10 роородро┐рокрпНрокрпЖрогрпН) роорпБроЯро┐ро╡рпБ",20,y);y+=10;
  doc.text(`рокрпЖропро░рпН: ${student.name}`,10,y);y+=6;
  doc.text(`ро╡роХрпБрокрпНрокрпБ/рокро┐ро░ро┐ро╡рпБ: ${student.class}`,10,y);y+=6;
  doc.text(`рокро│рпНро│ро┐: ${student.school}`,10,y);y+=6;
  doc.text(`родрпЗродро┐: ${student.date}`,10,y);y+=10;
  answers.forEach((a,i)=>{
    if(y>270){doc.addPage();y=15;}
    doc.text(`${i+1}. ${a.question}`,10,y);y+=6;
    doc.text(`   роЙроЩрпНроХро│рпН рокродро┐ро▓рпН: ${a.yourAnswer}`,12,y);y+=5;
    doc.text(`   роЪро░ро┐ропро╛рой рокродро┐ро▓рпН: ${a.correctAnswer}`,12,y);y+=5;
    doc.text(`   роиро┐ро▓рпИ: ${(a.isCorrect?"роЪро░ро┐":"родро╡ро▒рпБ")}`,12,y);y+=7;
  });
  const pct=Math.round((score/10)*100);
  const grade=gradeFromPercent(pct);
  y+=6;
  doc.text(`роорпКродрпНрод роородро┐рокрпНрокрпЖрогрпН: ${score}/10`,10,y);y+=6;
  doc.text(`роЪродро╡рпАродроорпН: ${pct}%`,10,y);y+=6;
  doc.text(`роородро┐рокрпНрокрпАроЯрпБ: ${grade}`,10,y);
  doc.save(`${student.name||'student'}_Maths_Quiz.pdf`);
}
</script>

<div class="footer">┬й 2025 Thiraviya Kumar | Class 9 Tamil Medium Maths Quiz</div>
</body>
</html>